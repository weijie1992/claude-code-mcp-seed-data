# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Nuxt 4 application using Vue 3, TypeScript, and Prisma ORM with PostgreSQL database. The project uses Nuxt's auto-generated type configurations and Prisma for type-safe database access.

## Common Commands

### Development
```bash
npm run dev          # Start development server at http://localhost:3000
```

### Build & Preview
```bash
npm run build        # Build application for production
npm run preview      # Preview production build locally
npm run generate     # Generate static site
```

### Setup
```bash
npm run setup        # Install dependencies AND run database migrations (recommended for first-time setup)
npm install          # Install dependencies only
```

### Database
```bash
npm run db:migrate   # Run new migrations (creates migration if schema changed)
npm run db:push      # Push schema changes without creating migration (dev only)
npm run db:reset     # Reset database and re-run all migrations
npm run db:studio    # Open Prisma Studio (database GUI)
```

## Project Structure

```
claude-code-mcp-seed-data/
├── app/
│   ├── app.vue                # Root Vue component
│   └── generated/prisma/      # Generated Prisma Client (gitignored)
├── prisma/
│   ├── schema.prisma          # Database schema definition
│   └── migrations/            # Database migration history
├── public/                    # Static assets
├── .env                       # Environment variables (gitignored)
├── docker-compose.yml         # PostgreSQL database container
├── nuxt.config.ts             # Nuxt configuration
├── prisma.config.ts           # Prisma 7 configuration
└── tsconfig.json              # TypeScript project references
```

## Architecture Notes

### TypeScript Configuration
The tsconfig.json uses project references pointing to auto-generated configs in `.nuxt/` directory:
- `tsconfig.app.json` - App-side TypeScript config
- `tsconfig.server.json` - Server-side TypeScript config
- `tsconfig.shared.json` - Shared TypeScript config
- `tsconfig.node.json` - Node.js TypeScript config

These are automatically generated by `nuxt prepare` (which runs on postinstall). Do not manually edit files in `.nuxt/`.

### Nuxt Auto-imports
Nuxt automatically imports:
- Vue composables (ref, computed, etc.)
- Nuxt composables (useRouter, useFetch, etc.)
- Components (placed in `components/` directory when created)

No explicit imports are needed for these.

### Development Tools
- Nuxt DevTools are enabled in development mode (`devtools: { enabled: true }` in nuxt.config.ts)
- Access DevTools via the Nuxt icon in browser when running dev server

## Working with This Codebase

### Adding New Pages
Create `.vue` files in a `pages/` directory (which will need to be created). Nuxt automatically creates routes based on file structure.

### Adding Components
Create `.vue` files in a `components/` directory (which will need to be created). They will be auto-imported.

### Adding Server Routes
Create files in a `server/` directory (which will need to be created) following Nuxt server structure.

### Configuration
All Nuxt configuration goes in `nuxt.config.ts`. Refer to https://nuxt.com/docs/api/configuration/nuxt-config for available options.

## Database with Prisma

### Database Setup
The project uses PostgreSQL running in Docker (via docker-compose.yml):
```bash
docker compose up -d     # Start PostgreSQL database
docker compose down      # Stop database
```

Connection: `postgresql://postgres:postgres@localhost:5432/postgres`

### Prisma Schema
Located at `prisma/schema.prisma`. The database currently has:
- **User model** with unique email field for authentication
- Auto-generated `id`, `createdAt`, and `updatedAt` fields

### Working with Prisma

**Prisma 7 Configuration**: Database URL is configured in `prisma.config.ts` (NOT in schema.prisma).

**Define enums in schema.prisma**:
```prisma
enum UserRole {
  USER
  ADMIN
}
```
Enums are auto-generated to TypeScript types - don't commit `app/generated/prisma/`, commit the schema instead.

**Using Prisma Client**:
```typescript
import { PrismaClient } from '~/app/generated/prisma'

const prisma = new PrismaClient()
```

**After schema changes**:
1. Update `prisma/schema.prisma`
2. Run `npm run db:migrate` to create and apply migration
3. Prisma Client is automatically regenerated
